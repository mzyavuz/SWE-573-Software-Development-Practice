<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guitar Lessons for Beginners ‚Äî Hive</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .scenario-badge {
            position: fixed;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 0.5rem 1.5rem 0.5rem 1.5rem;
            border-radius: 20px;
            font-weight: 600;
            z-index: 200;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .close-badge {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .close-badge:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* Navigation styles */
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo::before {
            content: "üêù";
            font-size: 2rem;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--primary-color);
        }

        .nav-user {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-balance {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: var(--white);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 600;
            cursor: pointer;
        }

        .detail-container {
            max-width: 1100px;
            margin: 2.5rem auto;
            margin-top: 5rem;
            padding: 0 1.5rem;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            min-height: calc(100vh - 140px);
        }

        .service-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }

        .service-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .service-meta {
            color: var(--text-light);
            margin-bottom: 1rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .service-description {
            color: var(--text-light);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .provider-card {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 1rem;
            box-shadow: none;
        }

        .provider-avatar {
            width: 72px;
            height: 72px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin-right: 1rem;
        }

        .small-meta { color: var(--text-light); font-size: 0.95rem; }

        .tag-list { margin-top: 0.5rem; display:flex; gap:0.5rem; flex-wrap:wrap; }

        .tag {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 999px;
            font-weight: 600;
            font-size: 0.85rem;
            background: #fef3c7;
            color: #92400e;
        }

        .badge {
            display: inline-block;
            padding: 6px 10px;
            border-radius: 999px;
            font-weight: 700;
            font-size: 0.85rem;
            background: #eff6ff;
            color: #1e3a8a;
        }

        .bookings-list { margin-top: 1rem; display:flex; flex-direction:column; gap:0.75rem; }

        .booking { display:flex; gap:0.75rem; align-items:center; padding:0.75rem; background:#fff; border-radius:8px; border:1px solid #e6fffa; }

        .preview-bar {
            max-width: 1100px;
            margin: 1.5rem auto 0.5rem auto;
            padding: 0.75rem;
            display:flex;
            gap:0.5rem;
            justify-content:center;
            align-items:center;
            position: sticky;
            top: 60px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .preview-bar .btn { padding: 0.5rem 0.75rem; font-size:0.875rem; }

        .owner-only { display:none; }

        .availability-section {
            margin-top: 1.5rem;
            padding: 1.25rem;
            background: #f8fafc;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }

        .time-slot {
            display: flex;
            gap: 0.75rem;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .day-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.5rem 0;
        }

        .day-availability {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.5rem 0;
            padding: 0.5rem;
            background: white;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }

        .day-availability input[type="checkbox"] {
            min-width: 16px;
        }

        .day-availability label {
            min-width: 80px;
            font-size: 0.85rem;
        }

        .day-availability input[type="time"] {
            padding: 0.3rem;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            font-size: 0.8rem;
            width: 70px;
        }

        .day-availability input[type="time"]:disabled {
            background: #f3f4f6;
            cursor: not-allowed;
        }

        .availability-display {
            font-size: 0.85rem;
            color: var(--text-light);
            line-height: 1.8;
        }

        .availability-display .day-row {
            display: flex;
            justify-content: space-between;
            padding: 0.25rem 0;
        }

        .availability-display .day-name {
            font-weight: 600;
            min-width: 80px;
        }

        .availability-display .day-time {
            color: #059669;
        }

        .availability-display .day-unavailable {
            color: #9ca3af;
            font-style: italic;
        }

        .request-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }

        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .request-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .success-banner {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            position: relative;
        }

        .success-banner .icon {
            font-size: 2rem;
        }

        .success-banner .content {
            flex: 1;
        }

        .success-banner h3 {
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .success-banner p {
            font-size: 0.9rem;
            opacity: 0.95;
        }

        .close-success-banner {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            transition: all 0.3s;
            flex-shrink: 0;
            position: absolute;
            top: 1rem;
            right: 1rem;
        }

        .close-success-banner:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        @media (max-width: 900px) {
            .detail-container { grid-template-columns: 1fr; margin-top: 4rem; }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="scenario-badge" id="scenarioBadge">
        <span>üìñ Scenario 2: Austin's Published Guitar Lesson Offer</span>
        <button class="close-badge" onclick="document.getElementById('scenarioBadge').style.display='none'" aria-label="Close scenario indicator">√ó</button>
    </div>

    <nav style="box-shadow: var(--shadow); background: var(--white);">
        <div class="nav-container">
            <a href="../../mockups/index.html" class="logo">Hive</a>
            <ul class="nav-links">
                <li><a href="../../mockups/index.html">Home</a></li>
                <li><a href="#">Find Services</a></li>
                <li><a href="#">My Services</a></li>
                <li><a href="#">Messages</a></li>
                <li><a href="#" class="active">Profile</a></li>
            </ul>
            <div class="nav-user">
                <div class="user-balance">
                    ‚è±Ô∏è <strong>1</strong> hour
                </div>
                <div class="user-avatar">AP</div>
            </div>
        </div>
    </nav>

    <!-- Preview bar for mockup toggles -->
    <div class="preview-bar">
        <span style="margin-right: 1rem; color: #6b7280; font-weight: 500;">View as:</span>
        <button class="btn btn-primary" id="viewOwner">Owner (Austin)</button>
        <button class="btn btn-ghost" id="viewPublic">Public View</button>
    </div>

    <main class="detail-container">
        <section class="service-card">
            <!-- Success banner (owner view only) -->
            <div id="successBanner" class="success-banner" style="display:none;">
                <div class="icon">üéâ</div>
                <div class="content">
                    <h3>Your offer is now live!</h3>
                    <p>Your guitar lesson offer is published and discoverable by the community. You'll receive notifications when someone requests a booking.</p>
                </div>
                <button class="close-success-banner" onclick="document.getElementById('successBanner').style.display='none'" aria-label="Close notification">√ó</button>
            </div>

            <div style="display:flex; justify-content:space-between; align-items:flex-start; gap:1rem;">
                <div style="flex:1;">
                    <h1 class="service-title">üé∏ Guitar Lessons for Beginners</h1>
                    <div style="margin-top:0.5rem;">
                        <span class="badge">Offer</span>
                        <span class="badge" style="background:#dcfce7; color:#166534;">Active</span>
                    </div>
                    <div class="service-meta">
                        <span>‚è∞ <span id="svcDuration">2 hours per session</span></span>
                        <span>üìç <span id="svcLocation">In Person</span></span>
                    </div>
                </div>
                <div style="text-align:right; display:flex; flex-direction:column; gap:0.5rem; align-items:flex-end;">
                    <button id="ownerEditBtn" class="btn btn-ghost" style="display:none;" onclick="alert('Edit service (demo)')">‚úèÔ∏è Edit</button>
                    <div>
                        <div class="small-meta">Posted: <strong>Dec 16, 2025</strong></div>
                        <div class="small-meta">Status: <strong>Available</strong></div>
                    </div>
                </div>
            </div>

            <p class="service-description">
                I'm an experienced guitarist offering personalized lessons for beginners. I can teach you basic chords, strumming patterns, and simple songs. Whether you want to learn acoustic or electric guitar, I'll tailor the lessons to your goals. All you need is your own guitar and a willingness to practice!
            </p>

            <div style="margin-top: 1rem;">
                <strong>What's Included:</strong>
                <ul style="margin-top:0.5rem; margin-left:1.25rem; color:var(--text-light)">
                    <li>Personalized one-on-one instruction</li>
                    <li>Basic chord progressions and strumming techniques</li>
                    <li>Practice materials and chord charts provided</li>
                </ul>
            </div>

            <div style="margin-top: 1rem;">
                <strong>Requirements:</strong>
                <ul style="margin-top:0.5rem; margin-left:1.25rem; color:var(--text-light)">
                    <li>No prior musical experience necessary!</li>
                </ul>
            </div>

            <div style="display:flex; gap:0.5rem; align-items:center; margin-top:1rem;">
                <div class="tag-list">
                    <span class="tag">guitar</span>
                    <span class="tag">tutoring</span>
                    <span class="tag">music</span>
                    <span class="tag">lessons</span>
                </div>
            </div>

            <!-- Public view: placeholder -->
            <div id="offerPublicPlaceholder" style="display:none; margin-top:1.5rem; background:#f0fdf4; padding:1rem; border-radius:8px; border:1px solid #86efac;">
                <div style="display:flex; justify-content:space-between; align-items:center; gap: 1rem;">
                    <div>
                        <strong style="color:#166534;">Available for booking</strong>
                        <div class="small-meta">This offer is currently open ‚Äî request a booking to reserve time with Austin.</div>
                    </div>
                    <div>
                        <button class="btn btn-primary" onclick="alert('Booking request sent! Austin will review and respond shortly. (Demo)')">Request Booking</button>
                    </div>
                </div>
            </div>

            <!-- Owner view: Pending Requests -->
            <div id="ownerRequests" style="display:none; margin-top:1.5rem;">
                <h3 style="margin-bottom:1rem;">üìã Booking Requests</h3>
                
                <div style="text-align: center; padding: 2rem; background: #f9fafb; border-radius: 8px; border: 1px dashed #d1d5db;">
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">üì≠</div>
                    <div style="font-weight: 600; color: #6b7280; margin-bottom: 0.25rem;">No booking requests yet</div>
                    <div class="small-meta">When someone requests a booking, you'll see it here and receive a notification.</div>
                </div>
            </div>

            <hr style="margin-top:1.5rem; margin-bottom:1.5rem; border:none; border-top:1px solid #e5e7eb;" id="aboutSectionDivider">

            <div id="aboutPersonSection">
                <h3 style="margin-bottom:1rem;">About the Provider</h3>
                <div style="display:flex; gap:1rem; align-items:center; justify-content:space-between;">
                    <div style="display:flex; gap:1rem; align-items:center;">
                        <div class="provider-avatar">üé∏</div>
                        <div>
                            <div style="font-weight:700;">Austin Page</div>
                            <div class="small-meta">Member since 2025 ‚Ä¢ New Provider</div>
                            <div class="small-meta" style="margin-top: 0.25rem;">‚≠ê No reviews yet</div>
                        </div>
                    </div>
                    <div id="messageProviderBtn" style="display:none;">
                        <button class="btn btn-secondary" onclick="alert('Open chat with Austin (demo)')">üí¨ Message Austin</button>
                    </div>
                </div>
                <div style="margin-top: 1rem; padding: 1rem; background: #f9fafb; border-radius: 8px;">
                    <strong style="display: block; margin-bottom: 0.5rem;">About Austin</strong>
                    <p class="small-meta" style="line-height: 1.6;">
                        Hi! I'm Austin, and I've been playing guitar for 8 years. I love teaching beginners and helping them discover the joy of making music. I believe anyone can learn to play with the right guidance and practice. Let's make music together!
                    </p>
                </div>
            </div>
        </section>

        <aside class="provider-card">
            <h3 style="margin-bottom:0.75rem;">Quick Info</h3>
            <div class="small-meta">Session length: <strong>2 hours</strong></div>
            <div class="small-meta">Max per session: <strong>3 hours</strong></div>
            <div class="small-meta">Rate: <strong>Time credits</strong></div>
            <div class="small-meta">Location: <strong>In Person</strong></div>
            <div class="small-meta">Where: <strong>My home or student's location</strong></div>

            <!-- Owner view: Availability Management -->
            <div id="ownerAvailabilitySidebar" style="display:none; margin-top:1.5rem; padding-top:1.5rem; border-top:1px solid #e5e7eb;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;">
                    <h3 style="margin:0; font-size:1rem;">‚è∞ Your Availability</h3>
                    <button id="editAvailabilityBtn" class="btn btn-ghost" style="padding:0.25rem 0.5rem; font-size:0.8rem;" onclick="toggleAvailabilityEdit()">‚úèÔ∏è Edit</button>
                </div>
                
                <!-- Display Mode -->
                <div id="availabilityDisplay" class="availability-display">
                    <div class="day-row">
                        <span class="day-name">Monday:</span>
                        <span class="day-unavailable">Unavailable</span>
                    </div>
                    <div class="day-row">
                        <span class="day-name">Tuesday:</span>
                        <span class="day-unavailable">Unavailable</span>
                    </div>
                    <div class="day-row">
                        <span class="day-name">Wednesday:</span>
                        <span class="day-time">16:00 - 20:00</span>
                    </div>
                    <div class="day-row">
                        <span class="day-name">Thursday:</span>
                        <span class="day-unavailable">Unavailable</span>
                    </div>
                    <div class="day-row">
                        <span class="day-name">Friday:</span>
                        <span class="day-unavailable">Unavailable</span>
                    </div>
                    <div class="day-row">
                        <span class="day-name">Saturday:</span>
                        <span class="day-time">10:00 - 18:00</span>
                    </div>
                    <div class="day-row">
                        <span class="day-name">Sunday:</span>
                        <span class="day-time">10:00 - 16:00</span>
                    </div>
                </div>

                <!-- Edit Mode -->
                <div id="availabilityEdit" style="display:none;">
                    <div class="day-availability">
                        <input type="checkbox" id="mon-check" onchange="toggleDayTimes('mon')">
                        <label for="mon-check">Monday</label>
                        <input type="time" id="mon-from" value="09:00" disabled>
                        <span style="font-size:0.75rem;">-</span>
                        <input type="time" id="mon-to" value="17:00" disabled>
                    </div>
                    <div class="day-availability">
                        <input type="checkbox" id="tue-check" onchange="toggleDayTimes('tue')">
                        <label for="tue-check">Tuesday</label>
                        <input type="time" id="tue-from" value="09:00" disabled>
                        <span style="font-size:0.75rem;">-</span>
                        <input type="time" id="tue-to" value="17:00" disabled>
                    </div>
                    <div class="day-availability">
                        <input type="checkbox" id="wed-check" checked onchange="toggleDayTimes('wed')">
                        <label for="wed-check">Wednesday</label>
                        <input type="time" id="wed-from" value="16:00">
                        <span style="font-size:0.75rem;">-</span>
                        <input type="time" id="wed-to" value="20:00">
                    </div>
                    <div class="day-availability">
                        <input type="checkbox" id="thu-check" onchange="toggleDayTimes('thu')">
                        <label for="thu-check">Thursday</label>
                        <input type="time" id="thu-from" value="09:00" disabled>
                        <span style="font-size:0.75rem;">-</span>
                        <input type="time" id="thu-to" value="17:00" disabled>
                    </div>
                    <div class="day-availability">
                        <input type="checkbox" id="fri-check" onchange="toggleDayTimes('fri')">
                        <label for="fri-check">Friday</label>
                        <input type="time" id="fri-from" value="09:00" disabled>
                        <span style="font-size:0.75rem;">-</span>
                        <input type="time" id="fri-to" value="17:00" disabled>
                    </div>
                    <div class="day-availability">
                        <input type="checkbox" id="sat-check" checked onchange="toggleDayTimes('sat')">
                        <label for="sat-check">Saturday</label>
                        <input type="time" id="sat-from" value="10:00">
                        <span style="font-size:0.75rem;">-</span>
                        <input type="time" id="sat-to" value="18:00">
                    </div>
                    <div class="day-availability">
                        <input type="checkbox" id="sun-check" checked onchange="toggleDayTimes('sun')">
                        <label for="sun-check">Sunday</label>
                        <input type="time" id="sun-from" value="10:00">
                        <span style="font-size:0.75rem;">-</span>
                        <input type="time" id="sun-to" value="16:00">
                    </div>

                    <div style="display:flex; gap:0.5rem; margin-top:1rem;">
                        <button class="btn btn-primary" style="flex:1; font-size:0.875rem;" onclick="saveAvailability()">üíæ Save</button>
                        <button class="btn btn-secondary" style="flex:1; font-size:0.875rem;" onclick="cancelAvailabilityEdit()">Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Public view: Availability Display -->
            <div id="publicAvailability" style="display:none; margin-top:1.5rem; padding-top:1.5rem; border-top:1px solid #e5e7eb;">
                <h4 style="margin-bottom:0.75rem;">üìÖ Availability</h4>
                <div class="availability-display">
                    <div class="day-row">
                        <span class="day-name">Wednesday:</span>
                        <span class="day-time">4:00 PM - 8:00 PM</span>
                    </div>
                    <div class="day-row">
                        <span class="day-name">Saturday:</span>
                        <span class="day-time">10:00 AM - 6:00 PM</span>
                    </div>
                    <div class="day-row">
                        <span class="day-name">Sunday:</span>
                        <span class="day-time">10:00 AM - 4:00 PM</span>
                    </div>
                </div>
                <div class="small-meta" style="margin-top: 0.75rem;">
                    üí° Specific booking times can be discussed after requesting
                </div>
            </div>

            <!-- Owner view: Stats -->
            <div id="ownerStats" style="display:none; margin-top:1.5rem; padding-top:1.5rem; border-top:1px solid #e5e7eb;">
                <h4 style="margin-bottom:0.75rem;">üìä Offer Statistics</h4>
                <div class="small-meta">Views: <strong>0</strong></div>
                <div class="small-meta">Requests: <strong>0</strong></div>
                <div class="small-meta">Completed: <strong>0</strong></div>
                <div class="small-meta" style="margin-top: 0.5rem; font-style: italic;">
                    Just published! Stats will appear as people interact with your offer.
                </div>
            </div>

            <!-- Owner view: Deactivate Button -->
            <div id="ownerDeactivate" style="display:none; margin-top:1.5rem; padding-top:1.5rem; border-top:1px solid #e5e7eb;">
                <button class="btn btn-secondary" style="width:100%; background:#fee2e2; color:#991b1b; border:1px solid #fecaca;" onclick="if(confirm('Are you sure you want to deactivate this offer? It will be hidden from search results.')) alert('Offer deactivated (demo)')">üîí Deactivate Offer</button>
                <div class="small-meta" style="margin-top:0.5rem; text-align:center;">
                    Deactivating will hide this offer from other users
                </div>
            </div>

            <!-- Sidebar Actions for Public View -->
            <div id="sidebarActions" style="display:none; margin-top:1.5rem; padding-top:1.5rem; border-top:1px solid #e5e7eb;">
                <button class="btn btn-primary" style="width:100%; margin-bottom:0.75rem;" onclick="alert('Booking request sent! Austin will review and respond shortly. (Demo)')">üìÖ Request Booking</button>
                <button class="btn btn-secondary" style="width:100%;" onclick="alert('Open chat with Austin (demo)')">üí¨ Message Austin</button>
            </div>
        </aside>
    </main>

    <script>
        function getQueryParam(name) {
            const params = new URLSearchParams(window.location.search);
            return params.get(name);
        }

        function setupView() {
            const role = (getQueryParam('role') || 'owner').toLowerCase();
            
            const offerPublicPlaceholder = document.getElementById('offerPublicPlaceholder');
            const messageProviderBtn = document.getElementById('messageProviderBtn');
            const aboutPersonSection = document.getElementById('aboutPersonSection');
            const aboutSectionDivider = document.getElementById('aboutSectionDivider');
            const sidebarActions = document.getElementById('sidebarActions');
            const ownerEditBtn = document.getElementById('ownerEditBtn');
            const ownerAvailabilitySidebar = document.getElementById('ownerAvailabilitySidebar');
            const publicAvailability = document.getElementById('publicAvailability');
            const ownerRequests = document.getElementById('ownerRequests');
            const ownerDeactivate = document.getElementById('ownerDeactivate');
            const ownerStats = document.getElementById('ownerStats');
            const successBanner = document.getElementById('successBanner');

            if (role === 'owner') {
                // Owner view: show edit button, stats, availability management; hide public elements
                offerPublicPlaceholder.style.display = 'none';
                if (messageProviderBtn) messageProviderBtn.style.display = 'none';
                if (aboutPersonSection) aboutPersonSection.style.display = 'none';
                if (aboutSectionDivider) aboutSectionDivider.style.display = 'none';
                if (sidebarActions) sidebarActions.style.display = 'none';
                if (publicAvailability) publicAvailability.style.display = 'none';
                
                if (ownerEditBtn) ownerEditBtn.style.display = 'block';
                if (ownerAvailabilitySidebar) ownerAvailabilitySidebar.style.display = 'block';
                if (ownerRequests) ownerRequests.style.display = 'block';
                if (ownerDeactivate) ownerDeactivate.style.display = 'block';
                if (ownerStats) ownerStats.style.display = 'block';
                if (successBanner) successBanner.style.display = 'flex';
            } else {
                // Public view: show booking options, provider info; hide owner controls
                offerPublicPlaceholder.style.display = 'block';
                if (messageProviderBtn) messageProviderBtn.style.display = 'block';
                if (aboutPersonSection) aboutPersonSection.style.display = 'block';
                if (aboutSectionDivider) aboutSectionDivider.style.display = 'block';
                if (sidebarActions) sidebarActions.style.display = 'block';
                if (publicAvailability) publicAvailability.style.display = 'block';
                
                if (ownerEditBtn) ownerEditBtn.style.display = 'none';
                if (ownerAvailabilitySidebar) ownerAvailabilitySidebar.style.display = 'none';
                if (ownerRequests) ownerRequests.style.display = 'none';
                if (ownerDeactivate) ownerDeactivate.style.display = 'none';
                if (ownerStats) ownerStats.style.display = 'none';
                if (successBanner) successBanner.style.display = 'none';
            }

            // Update button states
            document.getElementById('viewOwner').className = role === 'owner' ? 'btn btn-primary' : 'btn btn-ghost';
            document.getElementById('viewPublic').className = role === 'public' ? 'btn btn-primary' : 'btn btn-ghost';
        }

        function setupPreviewButtons() {
            document.getElementById('viewPublic').addEventListener('click', function() {
                const params = new URLSearchParams(window.location.search);
                params.set('role', 'public');
                window.history.replaceState({}, '', window.location.pathname + '?' + params.toString());
                setupView();
            });

            document.getElementById('viewOwner').addEventListener('click', function() {
                const params = new URLSearchParams(window.location.search);
                params.set('role', 'owner');
                window.history.replaceState({}, '', window.location.pathname + '?' + params.toString());
                setupView();
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            setupView();
            setupPreviewButtons();
        });

        function toggleDayTimes(day) {
            const checkbox = document.getElementById(day + '-check');
            const fromInput = document.getElementById(day + '-from');
            const toInput = document.getElementById(day + '-to');
            
            if (checkbox.checked) {
                fromInput.disabled = false;
                toInput.disabled = false;
            } else {
                fromInput.disabled = true;
                toInput.disabled = true;
            }
        }

        function toggleAvailabilityEdit() {
            document.getElementById('availabilityDisplay').style.display = 'none';
            document.getElementById('availabilityEdit').style.display = 'block';
            document.getElementById('editAvailabilityBtn').style.display = 'none';
        }

        function cancelAvailabilityEdit() {
            document.getElementById('availabilityDisplay').style.display = 'block';
            document.getElementById('availabilityEdit').style.display = 'none';
            document.getElementById('editAvailabilityBtn').style.display = 'block';
        }

        function saveAvailability() {
            // In a real app, this would save to backend
            const days = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'];
            const dayNames = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            
            let displayHTML = '';
            days.forEach((day, index) => {
                const checked = document.getElementById(day + '-check').checked;
                const from = document.getElementById(day + '-from').value;
                const to = document.getElementById(day + '-to').value;
                
                displayHTML += '<div class="day-row">';
                displayHTML += '<span class="day-name">' + dayNames[index] + ':</span>';
                if (checked) {
                    displayHTML += '<span class="day-time">' + from + ' - ' + to + '</span>';
                } else {
                    displayHTML += '<span class="day-unavailable">Unavailable</span>';
                }
                displayHTML += '</div>';
            });
            
            document.getElementById('availabilityDisplay').innerHTML = displayHTML;
            cancelAvailabilityEdit();
            alert('‚úÖ Availability updated successfully! (Demo)');
        }
    </script>
</body>
</html>
